
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>个人博客-基础功能版</title>
    <script src="https://unpkg.com/vue@next"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <div id="bloglist">
      <!--博文列表-->
      <div style="border:1px solid #db820d;margin: 5px;padding: 3px;" 
        v-for="(item,index) in blogList"
        :key="'bloglist'+index">
          <span @click="showBlog()">{{item.title}}</span><br>
          {{item.addTime}}<br>
          {{item.introduction}}<br>
          人气：{{item.viewCount}} 点赞：{{item.agreeCount}}<br>
      </div>
      <input type="button" value="写博客" @click="showSendBlog" />
   
      <div v-show="isShow">
        <!--发博客-->
        发博客<br>
        标题：<input v-model="blog.title" type="text"/> <br>
        简介：<br><textarea v-model="blog.introduction"  cols="50" rows="5"></textarea> <br>
        内容：<br><textarea v-model="blog.concent"  cols="50" rows="10"></textarea> <br>
        <input type="button" value="提交博客" @click="submit">
      </div>
    </div>

    <div id="blog">
      <div v-show="isShow" style="border:1px solid #db820d;margin: 5px;padding: 3px;" >
        <!--博文详细-->
        {{blogInfo.title}}<br>
        {{blogInfo.addTime}}<br>
        <p v-html="blogInfo.concent"></p>
        {{blogInfo.concent}}<br>
        {{blogInfo.viewCount}}<br>
        {{blogInfo.agreeCount}}<br>
      </div>
    </div>  
    <div id="DiscussList">
      <hr>
      <div v-show="isShow" style="border:1px solid #db820d;margin: 5px;padding: 3px;"
          v-for="(item,index) in discussList" :key="'discusslist'+index">
        <!--讨论列表-->
        {{index+1}}楼：
        {{item.discusser}} 在 {{item.addTime}} 说：<br>
        <p v-html="item.concent"></p>
        点赞：{{item.agreeCount}}<br>
      </div>
      <div v-show="isShow" style="border:1px solid #db820d;margin: 5px;padding: 3px;" >
        发讨论<br>
        昵称：<input v-model="discussForm.discusser" type="text"/> <br>
        内容：<textarea v-model="discussForm.concent" cols="50" rows="5"></textarea> <br>
        <input type="button" value="提交讨论" @click="submit">
      </div>
    </div>
 
  <script type="text/javascript">
    // 博文列表
    const BlogList = {
      data() {
        return {
          blogList:[ // 演示数据
            {
              title: '这是一个博客',
              addTime: '2020-10-15',
              introduction: '这是博客简介',
              viewCount: 1,
              agreeCount: 1
            },
            {
              title: '这是第二个博客',
              addTime: '2020-10-16',
              introduction: '这还是博客的简介',
              viewCount: 1,
              agreeCount: 1
            }
          ]
        }
      },
      methods: {
        showSendBlog() {
          // 显示写博文的div
          vmBlog.isShow = false
          this.isShow = true
        },
        showBlog() {
          // 显示写博文和讨论的div
          vmBlog.isShow = true
          this.isShow = false
        },
        getBlog() {
          // 到后端获取博文列表，略
        },
        reload(newBlog) {
          // 重新加载博文列表，前端演示用。
          this.blogList.push(newBlog)
        }
      }
    }
    
    // 发博文
    const SendBlog = {
      mixins: [BlogList],
      data() {
        return {
          isShow:false,
          blog:{  // 演示数据
            title: '这是一个博客',
            introduction: '这是博客的简介',
            concent: '这是博客的详细内容<br>第二行'
          } 
        }
      },
      methods: {
        // 提交博文
        submit(){
          let newBlog = {
            title: this.blog.title,
            addTime: '2020-10-16',
            introduction: this.blog.introduction,
            viewCount: 1,
            agreeCount: 1
          }
          // 调用 BlogList 的 reload 事件刷新博文列表
          this.reload(newBlog)
        }
      }
    }
    const vmSendBlog = Vue.createApp(SendBlog).mount('#bloglist')

    // 博文详细内容
    const Blog = {
      data() {
        return {
          isShow:false,
          blogInfo:{  // 博文详细信息
            title: '这是一个博文标题',
            addTime: '2020-10-15',
            concent: '这是博文的详细内容<br>第二行',
            viewCount: 1,
            agreeCount: 1
          }
        }
      },
      methods: {
      }
    }
    const vmBlog = Vue.createApp(Blog).mount('#blog')
 
    // 讨论列表和发讨论
    const DiscussList = {
      mixins: [Blog],
      data() {
        return {
          discussList:[  // 演示数据，讨论列表
            {
              discusser:'jyk',
              addTime: '2020-10-15',
              concent: '这个博客写的不错<br>第二行',
              agreeCount: 1
            },
            {
              discusser:'jyk',
              addTime: '2020-10-15',
              concent: '这也行？那我也能写<br>第二行',
              agreeCount: 1
            },
            {
              discusser:'jyk',
              addTime: '2020-10-15',
              concent: '对对，大家一起来写博客<br>第二行',
              agreeCount: 1
            }
          ]
        }
      },
      methods: {
        reload(newDiscuss) {
          // 重新加载讨论列表
          this.discussList.push(newDiscuss)
        }
      }
    }
    const vmDiscussList = Vue.createApp(DiscussList).mount('#blog')
 
    // 发讨论
    const DiscussForm = {
      mixins: [DiscussList],
      data() {
        return {
          discussForm:{  // 表单，提交讨论用
            discusser: '这是一个博客',
            concent: '这是博客的详细内容<br>第二行'
          }
        }
      },
      methods: {
        // 提交讨论
        submit(){
          // 演示用，不是提交给后端的数据
          let newDiscuss = {
            discusser: this.discussForm.discusser,
            addTime: '2020-10-16',
            concent: this.discussForm.concent,
            agreeCount: 1
          }
          this.reload(newDiscuss)
        }
      }
    }
    const vmDiscussForm = Vue.createApp(DiscussForm).mount('#blog')
 
  </script>
</body>
</html>

